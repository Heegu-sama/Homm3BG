% !TeX spellcheck = en_US
\documentclass[12pt]{article}

% Language setting
% Replace `english' with e.g. `spanish' to change the document language
\usepackage[english]{babel}

% Set page size and margins
% Replace `letterpaper' with `a4paper' for UK/EU standard size
\usepackage[a4paper,top=2cm,bottom=2cm,left=2cm,right=2cm,marginparwidth=1.75cm]{geometry}

% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}

\usepackage{caption}
\captionsetup[figure]{labelformat=empty}
\usepackage{subfigure}

\usepackage{tikz}
\usetikzlibrary{shadows, shadows.blur, calc}

\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage{enumitem}
\usepackage{multicol}
\usepackage{setspace}
\usepackage{wrapfig}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{outlines}
\usepackage[strict]{changepage}
\usepackage{fullwidth}
\usepackage[usetransparent=false]{svg}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
    pdftitle={Heroes of Might \& Magic III Rule Book},
    pdfpagemode=FullScreen,
    }
% Set the default spacing between paragraphs. Remove indentation.
\usepackage[skip=6pt, indent=0pt]{parskip}
\setstretch{1}

% Variables
\def\assets{assets}
\def\images{\assets/images}
\def\svgs{\assets/svgs}

% Drop shadow for images
\def\shadowshift{3pt,-3pt}
\def\shadowradius{6pt}

\colorlet{innercolor}{black!60}
\colorlet{outercolor}{gray!05}

\newcommand\drawshadow[1]{
  \begin{pgfonlayer}{shadow}
    \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$) circle (\shadowradius);
    \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) circle (\shadowradius);
    \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) circle (\shadowradius);
    \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,-\shadowradius/2)$) circle (\shadowradius);
    \shade[top color=innercolor,bottom color=outercolor] ($(#1.south west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) rectangle ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
    \shade[left color=innercolor,right color=outercolor] ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
    \shade[bottom color=innercolor,top color=outercolor] ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
    \shade[outercolor,right color=innercolor,left color=outercolor] ($(#1.south west)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
    \filldraw ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)-(\shadowradius/2,\shadowradius/2)$);
  \end{pgfonlayer}
}

% create a shadow layer, so that we don't need to worry about overdrawing other things
\pgfdeclarelayer{shadow}
\pgfsetlayers{shadow,main}

\newsavebox\mybox
\newlength\mylen

\newcommand\shadowimage[2][]{%
  \setbox0=\hbox{\includegraphics[#1]{#2}}
  \setlength\mylen{\wd0}
  \ifnum\mylen<\ht0
  \setlength\mylen{\ht0}
  \fi
  \divide \mylen by 120
  \def\shadowshift{\mylen,-\mylen}
  \def\shadowradius{\the\dimexpr\mylen+\mylen+\mylen\relax}
  \begin{tikzpicture}
    \node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[#1]{#2}};
    \drawshadow{image}
\end{tikzpicture}}
% End of drop shadow definition

%Create section heading with graphics. Argument one is heading name, argument two is picture to use on the left.
\newcommand{\addsection}[2]{
  \makebox[0pt][l]{
  \raisebox{-\totalheight}[0pt][5pt]{
    \begin{tikzpicture}
      \draw (0, 0) node[inner sep=0] {\includegraphics[width=\linewidth]{\images/sectionheading.jpg}};
      \draw (-6, 0) node {\includegraphics[width=0.125\textwidth]{#2}};
    \end{tikzpicture}
    }
  }
  % \begin{adjustwidth*}{}{0.125\textwidth}
  \begin{fullwidth}[leftmargin=0.15\textwidth]
    \begin{center}
      \color{yellow} \Huge \section*{\uppercase{#1}}
      \addcontentsline{toc}{section}{\protect\numberline{}#1}
    \end{center}
  % \end{adjustwidth*}
  \end{fullwidth}
  \vspace{2.5em}
}
%End of create section heading.

% Command for overlay circled text
\definecolor{goblin}{HTML}{3b7c33}
\newcommand\encircle[1]{%
  \tikz[baseline=(X.base)]
  \node (X) [draw=white, shape=circle, inner sep=0, fill=goblin, text=white, blur shadow={shadow blur steps=5}] {\strut \textbf{#1}};%
}

% Background
\AddToHook{shipout/background}{%
    \put (0in,-\paperheight){\includegraphics[width=\paperwidth,height=\paperheight]{\images/tausta.png}}%
    \put (0in,-\paperheight){\includegraphics[width=\paperwidth,height=0.05\paperheight]{\images/bottom.png}}%
}

\begin{document}

\title{\includegraphics[width=4cm]{\images/title.png} The Rewritening}

\author{Hermanni "Heegu" Karppela}
\maketitle

\begin{center}
Version 0.2
\end{center}

\tableofcontents

\clearpage

\textbf{Heroes of Might and Magic III: The Board Game} is a tactical strategy RPG board game for 1-3 players using the core box set. The continent of Antagarich is under war as several different factions, led by their heroes, battle for supremacy. Choose your faction and your hero and banish your unruly enemies from these lands.\bigbreak

\input{sections/game_modes.tex}

\include{sections/setup.tex}

\include{sections/round_structure.tex}

\include{sections/player_turns.tex}

\include{sections/heroes.tex}

\include{sections/deckbuilding.tex}

\include{sections/resources.tex}

\include{sections/town.tex}

\include{sections/map_elements.tex}

\include{sections/units.tex}

\include{sections/combat.tex}

\include{sections/scenario_end.tex}

\include{sections/other_rules.tex}

\include{sections/expansion_content.tex}

\include{sections/all_map_locations.tex}

\end{document}
